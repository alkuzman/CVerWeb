<md-card flex="none" ng-controller="CallController as callCtrl">
    <md-card-header>
        <md-card-avatar>
            <a ui-sref=".organization({id:result.owner.identifier.id})"><img class="md-user-avatar"
                                                                           ng-src="{{result.owner.profilePictureUrl | cverOrganizationCoverPictureFilter}}"/></a>
        </md-card-avatar>
        <md-card-header-text class="md-card-header-text">
            <span class="md-title">
                <a ui-sref=".organization({id:result.owner.identifier.id})">
                    <b>{{result.owner.name}}</b>
                </a>
                {{ "actions.announced" | translate | lowercase }}
                <a ui-sref=".call({id: result.identifier.id})">
                    {{ "other.call" | translate }}
                </a>
            </span>
            <span class="md-subhead" am-time-ago="result.creationDate"></span>
        </md-card-header-text>
    </md-card-header>
    <a ui-sref=".call({id: result.identifier.id})">
        <img class="md-card-image cover-img" ng-src="{{result.coverPictureUrl}}"
             alt="Card image cap">
    </a>
    <md-card-title>
        <md-card-title-text>
            <span class="md-headline">{{result.name}}</span>
        </md-card-title-text>
    </md-card-title>
    <md-card-content>
        <span class="md-caption" ng-show="result.description">{{ result.description | limitTo:140}}...</span>
    </md-card-content>
    <md-card-actions layout="row" layout-align="start center">
        <md-button ng-click="callCtrl.sendOneOfMyCvs(result, $event)" class="md-icon-button no-margin" aria-label="sendCv" md-colors="{color: 'accent'}">
            <md-tooltip>
                {{"actions.send" | translate}} {{ "other.cv" | translate}}
            </md-tooltip>
            <ng-md-icon icon="send"></ng-md-icon>
        </md-button>
        <md-button class="md-icon-button no-margin" aria-label="watchLater" md-colors="{color: 'secondary-accent-600'}">
            <md-tooltip>
                {{"actions.watch_later" | translate}}
            </md-tooltip>
            <ng-md-icon icon="watch_later"></ng-md-icon>
        </md-button>
        <md-card-icon-actions>
            <md-menu class="no-padding" ng-controller="ContextMenuController as cntxMenuCtrl">
                <md-button aria-label="Open phone interactions menu" class="md-icon-button no-margin"
                           ng-click="cntxMenuCtrl.openMenu($mdOpenMenu, $event)">
                    <md-tooltip>
                        {{ "other.more" | translate}} {{"other.options" | translate | lowercase}}
                    </md-tooltip>
                    <ng-md-icon icon="more_vert" class="text-grey"></ng-md-icon>
                </md-button>
                <md-menu-content width="4">
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}"
                        ui-sref=".call({id: result.identifier.id})">
                            <ng-md-icon icon="open_in_new"></ng-md-icon>
                            {{"actions.open" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person" ui-sref=".organization({id: result.owner.identifier.id})"></ng-md-icon>
                            {{"other.owner" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-divider></md-menu-divider>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="send"></ng-md-icon>
                            {{"actions.send" | translate}} {{ "other.cv" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="watch_later" ></ng-md-icon>
                            {{"actions.watch_later" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="share"></ng-md-icon>
                            {{"actions.share" | translate}}
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </md-card-icon-actions>
    </md-card-actions>
    <md-card-footer md-colors="{background: 'background-200'}">
        <span class="md-caption" md-colors="{color: 'secondary-accent-500-1'}">{{ "other.last_modified" | translate }}: <span am-time-ago="result.lastModified"></span></span>
    </md-card-footer>
</md-card>