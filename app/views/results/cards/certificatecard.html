<md-card flex="none">
    <md-card-header flex="none">
        <md-card-avatar ng-switch="result.recipient.type">
            <img class="md-user-avatar" ng-switch-when="Person" ng-src="{{result.recipient.profilePictureUrl | cverPersonProfilePictureFilter}}"/>
            <img class="md-user-avatar" ng-switch-when="Organization" ng-src="{{result.recipient.profilePictureUrl | cverOrganizationProfilePictureFilter}}"/>
        </md-card-avatar>
        <md-card-header-text class="md-card-header-text">
            <span class="md-title">
                <span ng-switch="result.recipient.type">
                    <a ng-switch-when="Person" ui-sref=".person({id: result.recipient.identifier.id})"><b>{{result.recipient.firstName}} {{result.recipient.lastName}}</b></a>
                    <a ng-switch-when="Organization" ui-sref=".organization({id: result.recipient.identifier.id})"><b>{{result.recipient.name}}</b></a>
                </span>
                {{ "cver.is_certificated" | translate | lowercase }}
                <span ng-show="result.issuer">
                    {{ "other.by" | translate | lowercase }}
                    <span ng-switch="result.issuer.type">
                        <a ng-switch-when="Person" ui-sref=".person({id: result.issuer.identifier.id})"><b>{{result.issuer.firstName}} {{result.issuer.lastName}}</b></a>
                        <a ng-switch-when="Organization" ui-sref=".organization({id: result.issuer.identifier.id})">{{result.issuer.name}}</a>
                    </span>
                </span>
            </span>
            <span class="md-subhead" am-time-ago="result.issuedDate"></span>
            <div style="clear:both"></div>
        </md-card-header-text>
        <div style="clear:both"></div>
    </md-card-header>
    <a ui-sref=".certificate({id: result.identifier.id})">
        <img class="md-card-image cover-img"
             ng-src="{{result.coverPictureUrl}}"
             alt="Card image cap">
    </a>
    <md-card-title flex="none">
        <md-card-title-text>
            <span class="md-headline">
                <ng-md-icon ng-show="result.isVerified == true" icon="verified_user" md-colors="{color: 'green'}">
                    <md-tooltip>
                        {{ "cver.this_certificate_is_verified_by" | translate }}
                        {{ result.issuer.name }}
                    </md-tooltip>
                </ng-md-icon>
                <ng-md-icon ng-show="result.isVerified == false" icon="cancel" md-colors="{color: 'warn'}">
                    <md-tooltip>
                        {{ "cver.this_certificate_is_refused_by" | translate }}
                        {{ result.issuer.name }}
                    </md-tooltip>
                </ng-md-icon>
                {{result.name}}
            </span>
        </md-card-title-text>
    </md-card-title>
    <md-card-content flex="none">
        <span class="md-caption">{{result.description | limitTo: 140}}</span>
    </md-card-content>
    <md-card-actions layout="row" layout-align="start center">
        <md-button class="md-icon-button no-margin" aria-label="watchLater" md-colors="{color: 'secondary-accent-600'}">
            <md-tooltip>
                {{"actions.watch_later" | translate}}
            </md-tooltip>
            <ng-md-icon icon="watch_later"></ng-md-icon>
        </md-button>
        <md-card-icon-actions>
            <md-menu class="no-padding" ng-controller="ContextMenuController as cntxMenuCtrl">
                <md-button aria-label="Open phone interactions menu" class="md-icon-button no-margin"
                           md-colors="{color: 'secondary-accent-600'}"
                           ng-click="cntxMenuCtrl.openMenu($mdOpenMenu, $event)">
                    <md-tooltip>
                        {{ "other.more" | translate}} {{"other.options" | translate | lowercase}}
                    </md-tooltip>
                    <ng-md-icon icon="more_vert"></ng-md-icon>
                </md-button>
                <md-menu-content width="4">
                    <md-menu-item>
                        <md-button ui-sref=".certificate({id: result.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="open_in_new"></ng-md-icon>
                            {{"actions.open" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-show="cardCtrl.checkType(result.recipient.type, 'Person');"
                                   ui-sref=".person({id: result.recipient.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.recipient" | translate}}
                        </md-button>
                        <md-button ng-show="cardCtrl.checkType(result.recipient.type, 'Organization');"
                                   ui-sref=".organization({id: result.recipient.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.recipient" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-show="cardCtrl.checkType(result.issuer.type, 'Person');"
                                   ui-sref=".person({id: result.issuer.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.issuer" | translate}}
                        </md-button>
                        <md-button ng-show="cardCtrl.checkType(result.issuer.type, 'Organization');"
                                   ui-sref=".organization({id: result.issuer.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.issuer" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-show="cardCtrl.checkType(result.owner.type, 'Person');"
                                   ui-sref=".person({id: result.owner.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.owner" | translate}}
                        </md-button>
                        <md-button ng-show="cardCtrl.checkType(result.owner.type, 'Organization');"
                                   ui-sref=".organization({id: result.owner.identifier.id})"
                                   md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="person"></ng-md-icon>
                            {{"other.owner" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="receipt"></ng-md-icon>
                            {{"other.template" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-divider></md-menu-divider>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="file_download"></ng-md-icon>
                            {{"actions.download" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="watch_later"></ng-md-icon>
                            {{"actions.watch_later" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="print"></ng-md-icon>
                            {{"actions.print" | translate}}
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button md-colors="{color: 'secondary-accent-600'}">
                            <ng-md-icon icon="share"></ng-md-icon>
                            {{"actions.share" | translate}}
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </md-card-icon-actions>
    </md-card-actions>
    <md-card-footer md-colors="{background: 'background-200'}">
        <span class="md-caption" md-colors="{color: 'secondary-accent-500-1'}">{{ "other.last_modified" | translate }}: <span
                am-time-ago="result.lastModified"></span></span>
    </md-card-footer>
</md-card>